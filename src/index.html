<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="./output.css" rel="stylesheet">
  <link href="./styles.css" rel="stylesheet">
  
</head>

<body class="">
	<div id="step1" class="w-full h-screen flex justify-center items-center">
		<div id="dialog1" class="hidden glass py-3 px-4 w-72 fade-box ">
			<h1 id="text1" class="text-white text-center text-sm font-medium "></h1>
			<div id="option1" class=" justify-center gap-2 text-white mt-4 hidden opacity-0 transition-opacity duration-500">
				<button id="button1" class="text-md font-medium button px-3 rounded-2xl">Iya</button>
				<button id="button2" class="  text-md font-medium button px-3 rounded-2xl">Bukan</button>
			</div>
		</div>
		<div id="dialog2" class=" glass py-3 px-4 w-72 fade-box">
			<h1 id="text2" class="text-white text-center text-sm font-medium "></h1>
			<div id="option2" class=" gap-2 text-white mt-4 flex opacity-100 transition-opacity duration-500">
				<div class="p-2 bg-red-500 font-medium rounded-2xl">1</div>
			</div>
		</div>
	</div>
	<div id="step2" class="hidden container place-content-center">
		<div class="flipbook -translate-x-10 sm:translate-x-[-45px] ">
		  <div class="object-cover">
			<img src="images/cover.jpg" alt="" />
		  </div>
		  <div class="hard"></div>
		  <div>
			<img src="images/page1.jpg" alt="" />
		  </div>
		  <div class="hard"></div>
		  <div>
			<img src="images/cat.jpg" alt="" />
		  </div>
		  <div>
			<img src="images/img-3.png" alt="" />
			<small> Pikachu </small>
		  </div>
		  <div>
			<img src="images/img-4.png" alt="" />
			<small> Mew </small>
		  </div>
		  <div>
			<img src="images/img-5.png" alt="" />
			<small> Darkrai </small>
		  </div>
		  <div class="hard"></div>
		  <div class="hard">Thank You <small>~ HankTheTank</small></div>
		</div>
	</div>

  <script src="jquery.js"></script>
  <script src="turn.js"></script>
  <script>

	//Step 1
	let step = 1;
      const content = [
  "Halo... boleh pastiin sebentar? Kamu yang namanya Someone, kan?",
  "Ini beneran kamu kah? Coba masukkan PIN yang aku kasih tadi, aku cuman mau mastiin kalo ini beneran kamu."
];

let indexProgress = {}; // simpan progress tiap id

function type(id, time = 10) {
  if (!indexProgress[id]) indexProgress[id] = 0;

  const i = indexProgress[id];
  const text = content[id - 1];

  if (i < text.length) {
    $(`#text${id}`).text($(`#text${id}`).text() + text.charAt(i));
    indexProgress[id]++;

    setTimeout(() => type(id), 30);
  } else {
    // selesai ngetik
    $(`#option${id}`).removeClass("hidden").addClass("flex");

    setTimeout(() => {
      $(`#option${id}`).removeClass("opacity-0");
    }, time);
  }
}

  type(1);

  $("#option1 #button1").on("click", () => {
    dialog = 2;
    fadeOut("#dialog1")
  setTimeout(() => {
    fadeIn("#dialog2")
	type(2)
  }, 1000)
  })

  function fadeOut(el) {
    $(el).addClass("fade-out");

  $(el).on("transitionend", () => {
    $(el).css("display", "none")
  });
  }
  
  function fadeIn(el) {
    $(el).removeClass("hidden")
      setTimeout(() => {
  $(el).removeClass("opacity-0"); 
}, 10);
  }

	//Step 2
    $(".flipbook").turn({
		width: 400,
		height: 300,
		autoCenter: true
	});
	

	$('.flipbook').bind("turning", (e,p,v) => {
		console.log(p)
		if(p === 1) {

			$('.flipbook').addClass("-translate-x-10 ")
		} else {
			$('.flipbook').removeClass("-translate-x-10")
		}
	});

	
  </script>
</body>

</html>